**对于测试函数 $f(x)=x_1^2-x_1x_2+x_2^2+2x_1+4x_2+3$ ($-5\le x_1, x_2\le 5$)，寻找其最大值。** 

* 参数维度：2（两个自变量$x_1,x_2$）
* 食物源 = 引领蜂 = 跟随蜂 = 5
* 适应度值函数 $$\begin{equation}
  fit=\left\{
  \begin{aligned}
  \frac{1}{1+f}, f\ge0 \\
  1+|f|,f\lt0.
  \end{aligned}
  \right.
  \end{equation}$$
* 杂交时参数更新函数$X_{new}=X+\Phi(X-X_P),\Phi\in[-1,1]$ ，本示例中 $\Phi$ 自行指定. 

初始化随机产生食物源 $F_1$ 至 $F_5$. 其对应的属性值如下所示：

|食物源标号| 自变量            | 函数值  | 适应度值 | 采集次数 |
|-------| ----------------- | ------- | -------- | -------- |
|$F_1$| (3.1472, -4.0246) | 31.9645 | 0.0303   | 0        |
|$F_2$| (4.0579, -2.2150) | 32.6168 | 0.0297   | 0        |
|$F_3$| (-3.7301, 0.4688) | 13.2971 | 0.0699   | 0        |
|$F_4$| (4.1338, 4.5751) | 48.6753 | 0.0201   | 0        |
|$F_5$| (1.3236, 4.6489) | 41.4537 | 0.0236 | 0        |



-------

## 引领蜂阶段：

$1_{st}$ 引领蜂：

* 找到第 1 个食物源$F_1$ (3.1472, -4.0246) 
* 随机选取 $F_1$ 其中一个自变量$x_1$，随机选取另一个食物源 $F_4$ 的 $x_1$ 进行杂交
* 根据参数更新函数得到 $F_{1new}$(2.4467, -4.0246)
* 计算得 $f(x)=23.8259$, $fit=0.0403$
* 则此情况下 $F_1$ 适应度值没有变小，食物源不更新，采集次数 +1

$2_{nd}$ 引领蜂：

* 找到第 2 个食物源$F_2$ (4.0579, -2.2150) 
* 随机选取 $F_2$ 其中一个自变量$x_2$，随机选取另一个食物源 $F_3$ 的 $x_2$ 进行杂交
* 根据参数更新函数得到 $F_{2new}$(4.0579, -3.0470)
* 计算得 $f(x)=37.0428$, $fit=0.0263$
* 则此情况下 $F_2$ 适应度值变小，食物源更新，采集次数置0

$3_{rd}$ 引领蜂：

* 找到第 3 个食物源$F_3$ (-3.7301, 0.4688) 
* 随机选取 $F_3$ 其中一个自变量$x_2$，随机选取另一个食物源 $F_1$ 的 $x_2$ 进行杂交
* 根据参数更新函数得到 $F_{3new}$(-3.7301, 2.7604)
* 计算得 $f(x)=38.4119$, $fit=0.0254$
* 则此情况下 $F_3$ 适应度值变小，食物源更新，采集次数置0

$4_{th}$ 引领蜂：

* 找到第 4 个食物源$F_4$ (4.1338, 4.57516) 
* 随机选取 $F_4$ 其中一个自变量$x_1$，随机选取另一个食物源 $F_2$ 的 $x_1$ 进行杂交
* 根据参数更新函数得到 $F_{4new}$(4.1179, 4.57516)
* 计算得 $f(x)=48.5848$, $fit=0.0202$
* 则此情况下 $F_4$ 适应度值没有变小，食物源不更新，采集次数 +1

$5_{th}$ 引领蜂：

* 找到第 5 个食物源$F_5$ (1.3236, 4.6489) 
* 随机选取 $F_5$ 其中一个自变量$x_1$，随机选取另一个食物源 $F_4$ 的 $x_1$ 进行杂交
* 根据参数更新函数得到 $F_{5new}$(1.6327, 4.6489)
* 计算得 $f(x)=41.5487$, $fit=0.0235$
* 则此情况下 $F_5$ 适应度值变小，食物源更新，采集次数置 0

引领蜂全部采集完毕，更新后的食物源如下：

|食物源标号| 自变量            | 函数值  | 适应度值 | 采集次数 |
|-------| ----------------- | ------- | -------- | -------- |
|$F_1$| (3.1472, -4.0246) | 31.9645 | 0.0303   | 1       |
|$F_2$| (4.0579, -3.0470) | 37.0428 | 0.0263 | 0        |
|$F_3$| (-3.7301, 2.7604) | 38.4119 | 0.0254 | 0        |
|$F_4$| (4.1338, 4.5751) | 48.6753 | 0.0201   | 1       |
|$F_5$| (1.6327, 4.6489) | 41.5487 | 0.0235 | 0        |

采用 $P_i=\frac{fit_i}{\sum{fit_i}}$ 计算每个食物源的决策概率。$P_i=[0.2415, 0.2092, 0.2020, 0.1602, 0.1871]$. 

--------

## 跟随蜂阶段：

$1_{st}$跟随蜂，$1_{st}$食物源：

* 跟随蜂产生一个随机数 r=0.23 < 0.2415，采集食物源
* 找到第 1 个食物源$F_1$ (3.1472, -4.0246) 
* 随机选取 $F_1$ 其中一个自变量$x_2$，随机选取另一个食物源 $F_3$ 的 $x_2$ 进行杂交
* 根据参数更新函数得到 $F_{1new}$(3.1472, 0.6571)
* 计算得 $f(x)=20.1914$, $fit=0.0472$
* 则此情况下 $F_1$ 适应度值没有变小，食物源不更新，采集次数 +1

$2_{nd}$跟随蜂，$2_{nd}$食物源：

* 跟随蜂产生一个随机数 r=0.15 < 0.2092，采集食物源
* 找到第 2 个食物源$F_2$ (4.0579, -3.0470) 
* 随机选取 $F_2$ 其中一个自变量$x_1$，随机选取另一个食物源 $F_5$ 的 $x_1$ 进行杂交
* 根据参数更新函数得到 $F_{2new}$(5.0000, -3.0470)
* 计算得 $f(x)=50.3311$, $fit=0.0195$
* 则此情况下 $F_2$ 适应度值变小，食物源更新，采集次数置 0 

$3_{rd}$跟随蜂，$3_{rd}$食物源：

* 跟随蜂产生一个随机数 r=0.12 < 0.2020，采集食物源
* 找到第 3 个食物源$F_3$ (-3.7301, 2.7604) 
* 随机选取 $F_3$ 其中一个自变量$x_1$，随机选取另一个食物源 $F_2$ 的 $x_1$ 进行杂交
* 根据参数更新函数得到 $F_{3new}$(-5.0000, 2.7604)
* 计算得 $f(x)=50.4639$, $fit=0.0194$
* 则此情况下 $F_3$ 适应度值变小，食物源更新，采集次数置 0 

$4_{th}$跟随蜂，$4_{th}$食物源：

* 跟随蜂产生一个随机数 r=0.35 > 0.1602，不采集食物源
* 该蜜蜂去寻找下一个食物源

$4_{th}$跟随蜂，$5_{th}$食物源：

* 跟随蜂产生一个随机数 r=0.13 < 0.1871，采集食物源
* 找到第 5 个食物源$F_5$ (1.6327, 4.6489) 
* 随机选取 $F_5$ 其中一个自变量$x_1$，随机选取另一个食物源 $F_1$ 的 $x_1$ 进行杂交
* 根据参数更新函数得到 $F_{5new}$(1.6327, 5.0000)
* 计算得 $f(x)=45.7676$, $fit=0.0214$
* 则此情况下 $F_5$ 适应度值变小，食物源更新，采集次数置 0 

$5_{th}$跟随蜂，$1_{st}$食物源：

* 跟随蜂产生一个随机数 r=0.19 < 0.2415，采集食物源
* 找到第 1 个食物源$F_1$ (3.1472, -4.0246) 
* 随机选取 $F_1$ 其中一个自变量$x_2$，随机选取另一个食物源 $F_2$ 的 $x_2$ 进行杂交
* 根据参数更新函数得到 $F_{1new}$(3.1472, -3.5847)
* 计算得 $f(x)=28,9921$, $fit=0.333$
* 则此情况下 $F_1$ 适应度值没有变小，食物源不更新，采集次数 +1 

跟随蜂全部采集完毕，更新后的食物源如下：

|食物源标号| 自变量            | 函数值  | 适应度值 | 采集次数 |
|-------| ----------------- | ------- | -------- | -------- |
|$F_1$| (3.1472, -4.0246) | 31.9645 | 0.0303   | 3       |
|$F_2$| (5.0000, -3.0470) | 50.3311 | 0.0195 | 0        |
|$F_3$| (-5.0000, 2.7604) | 50.4639 | 0.0194 | 0        |
|$F_4$| (4.1338, 4.5751) | 48.6753 | 0.0201   | 1       |
|$F_5$| (1.6327, 5.0000) | 45.7676 | 0.0214 | 0        |

-------

## 侦察蜂阶段：

侦察蜂阶段，检查每一个食物源的采集次数，此例不妨设采集次数 limit = 1

因此遍历所有食物源仅更新 $F_1$，随机产生一个新的值赋值给 $F_1$ 即可

产生的新值为 (3.6045, -1.7170)，侦察蜂阶段结束，更新后的食物源如下：

| 食物源标号 | 自变量            | 函数值  | 适应度值 | 采集次数 |
| ---------- | ----------------- | ------- | -------- | -------- |
| $F_1$      | (3.6045, -1.7170) | 25.4710 | 0.0378   | 0        |
| $F_2$      | (5.0000, -3.0470) | 50.3311 | 0.0195   | 0        |
| $F_3$      | (-5.0000, 2.7604) | 50.4639 | 0.0194   | 0        |
| $F_4$      | (4.1338, 4.5751)  | 48.6753 | 0.0201   | 1        |
| $F_5$      | (1.6327, 5.0000)  | 45.7676 | 0.0214   | 0        |