---
layout: post
title: "关系数据库理论-候选码的求法"
date:   2019-03-17
tags: [Database]
comments: false
toc: false
author: shikamaru
excerpt_separator: ""
---

# 求解候选码

## 候选码概念

候选码：

通过一个属性集合，能够以某种依赖关系推导出其他所有属性，那么这个属性集中包含的属性就叫做候选码。但候选码的任意真子集都无法达到相同的效果，**因此可以说候选码是最小有该效果的“集合”**（这里解释一下，还有一个概念叫做**超码**，**超码**的真子集是能够有上述效果的，候选码是最小的超码）。

用途：通过候选码确定主码。

## 求解方法

* STEP 1: 对于一个函数依赖关系集，只出现在左边属性，一定包含在候选码之内；
* STEP 2: 只出现在右边的**一定不是**候选码；
* STEP 3: 左右均出现的**可能**是候选码；
* STEP4: 左右均未出现的一定是候选码（即没有其他的属性能通过某种关系推导出它，那它本身必须就在候选码内）；
* STEP5: 对于一定是候选码的属性求闭包，若能得到所有属性，则结束；
* STEP6: 若STEP5不能结束，则将可能是候选码的元素依次添加到闭包属性中，若再求闭包，能够得到所有的属性，则结束；
* STEP7: 若STEP6不能结束，则将可能是候选码的元素中的任意两个组合添加进闭包属性...

## 例子

对于 R(A, B, C, D, E, G) 有函数关系 F = (A->C, CD->E, E->A, A->G). 

1. 找出一定是、可能是、与一定不是的属性

| 属性   | 状态     |
| :--- | --- |
| BD   | 一定     |
| ACE  | 可能     |
| G    | 一定不是 |

2. 求闭包

   a. (BD)+ = BD，不能得到全部加A进入

   b. (ABD)+ = ABCDE，候选码get

   c. (BCD)+ = ABCDE，候选码get

   d. (BDE)+ = ABCDE，候选码get

3. 得出结论，候选码为ABD、BCD、BDE。